angular.module('myApp', ['checklist-model', 'ngRoute', 'ngDialog', 'ngService', 'cCatalogos','filtros','directivas','ngResource','mContactanos'])

    .config(function ($routeProvider) {
        $routeProvider
            .when('/', {
                templateUrl: 'view/home.html',
            })
            .when('/equipos/:tipo?/:filtro?/:descripcion?', {
                templateUrl: 'view/equipos.html',
                controller: 'ctrlEquipos'
            })
            .when('/refacciones', {
                templateUrl: 'view/refacciones.html',
                controller: 'ctrlRefacciones'
            })            
            .when('/contacto/:asunto?/:name?/:marca?/:modelo?', {
                templateUrl: 'view/contacto.html',
                controller: 'ctrlContactanos'
            })
            .when('/proyectos', {
                templateUrl: 'view/proyectos.html',
                controller: ''
            })
            .when('/proyectos/remolque-autonomo', {
                templateUrl: 'view/proyectos-generico.html',
                controller: ''
            })
            .otherwise({
                redirectTo: '/'
            });
    })


    .controller('ctrlMenu', ['$scope',function ($scope) {
        $scope.objMenu = {
            menuSeleccionado: 'home',
            classfooter :'normal-footer',
            ItemSeleccionado : function(idMenu){
                console.log(idMenu);
                if(idMenu == 'home'){
                    $scope.objMenu.menuSeleccionado = 'home';
                    this.CambiarFooter('normal-footer');
                }
                if(idMenu == 'equipos'){
                    $scope.objMenu.menuSeleccionado = 'equipos';
                }
                if(idMenu == 'suministro'){
                    $scope.objMenu.menuSeleccionado = 'suministro';
                }
                if(idMenu == 'refacciones'){
                    $scope.objMenu.menuSeleccionado = 'refacciones';
                }
                if(idMenu == 'quienes&somos'){
                    $scope.objMenu.menuSeleccionado = 'quienes&somos';
                }
                if(idMenu == 'contacto'){
                    $scope.objMenu.menuSeleccionado = 'contacto';
                }
            },
            CambiarFooter:function(tipo){
                $scope.objMenu.classfooter = tipo;
            }
        };
    }])

    .controller('ctrlEquipos', ['$scope', 'Modal', 'cEquipos', '$routeParams', '$location', function ($scope, Modal, cEquipos, $routeParams, $location) {
        /*
         id = equivale que tipo de e1uipo es
         1 = hidrolavadora
         2 = motobombas
         3 = aspairadoras
         4 = generadores
         idSerie es definido como comercial o industrial
         1 = Industrial
         2 = Comercial
         idMotor es que tipo de Motor tiene el equipo
         1 = Electrica
         2 = Gasolina
         3 = Diesel
         idTipoAgua es que tipo de agua procesa fria, caliente o ambas
         1 = fria
         2 = caliente
         3 = caliente y fria
         Tamaño de Imagen 413 * 331 170 Resolucion
         */

        $scope.objMenu.ItemSeleccionado('equipos');
        $scope.catEquipos = cEquipos.tiposEquipos;
        $scope.objIteracion = {
            namaCategoria:"Todos",
            idCatEquipos: 100,
            idFiltroEquipo :1,
            catEquipos: cEquipos.tiposEquipos,
            arrFiltrado: [],
            gridList: 'gallery',
            arrFiltrosCategoria: [],
            selected: {filtros: []},
            categoriaSeleccionada : 100,
            cargarArray: function (categoria) {
                this.categoriaSeleccionada = categoria.id;
                this.namaCategoria = categoria.name;
                var idEquipo = categoria.id;
                this.paginacion.paginaActual = 0;
                if (idEquipo == 100) {
                    this.arrFiltrado = this.Todos();
                    this.arrFiltrosCategoria = [];
                    this.paginacion.ConstruirPaginado(this.arrFiltrado);
                } else if (idEquipo == 1) {
                    this.arrFiltrado = this.Hidrolavadoras();
                    this.arrFiltrosCategoria = this.GetFiltrosCategorias(1);
                    this.selected.filtros = [];
                    this.paginacion.ConstruirPaginado(this.arrFiltrado);

                }
                else if (idEquipo == 2) {
                    this.arrFiltrado = this.Motobombas();
                    this.arrFiltrosCategoria = this.GetFiltrosCategorias(2);
                    this.selected.filtros = [];
                    this.paginacion.ConstruirPaginado(this.arrFiltrado);
                }
                else if (idEquipo == 3) {
                    this.arrFiltrado = this.Aspiradoras();
                    this.arrFiltrosCategoria = this.GetFiltrosCategorias(3);
                    this.selected.filtros = [];
                    this.paginacion.ConstruirPaginado(this.arrFiltrado);
                }
                else if (idEquipo == 4) {
                    this.arrFiltrado = this.Espumadores();
                    this.arrFiltrosCategoria = this.GetFiltrosCategorias(4);
                    this.selected.filtros = [];
                    this.paginacion.ConstruirPaginado(this.arrFiltrado);
                }
                else if (idEquipo == 5) {
                    this.arrFiltrado = this.Generadores();
                    this.arrFiltrosCategoria = this.GetFiltrosCategorias(5);
                    this.selected.filtros = [];
                    this.paginacion.ConstruirPaginado(this.arrFiltrado);
                }
                else if (idEquipo == 6) {
                    this.arrFiltrado = this.TorresIluminacion();
                    this.arrFiltrosCategoria = this.GetFiltrosCategorias(6);
                    this.selected.filtros = [];
                    this.paginacion.ConstruirPaginado(this.arrFiltrado);
                }
                else if (idEquipo == 7) {
                    this.arrFiltrado = this.Podadoras();
                    this.arrFiltrosCategoria = this.GetFiltrosCategorias(7);
                    this.selected.filtros = [];
                    this.paginacion.ConstruirPaginado(this.arrFiltrado);
                }
                else if (idEquipo == 8) {
                    this.arrFiltrado = this.Desbrosadoras();
                    this.arrFiltrosCategoria = this.GetFiltrosCategorias(8);
                    this.selected.filtros = [];
                    this.paginacion.ConstruirPaginado(this.arrFiltrado);
                }
            },
            GetFiltrosCategorias: function (posicion) {
                return this.catEquipos[posicion].filtros;
            },
            Todos: function () {
                var arrayTodos = [];
                arrayTodos = arrayTodos.concat(cEquipos.hidrolavadoras);
                arrayTodos = arrayTodos.concat(cEquipos.motobombas);
                arrayTodos = arrayTodos.concat(cEquipos.aspiradoras);
                arrayTodos = arrayTodos.concat(cEquipos.espumadores);
                arrayTodos = arrayTodos.concat(cEquipos.generadores);

                return arrayTodos;
            },
            Hidrolavadoras: function () {
                return cEquipos.hidrolavadoras;
            },
            Motobombas: function () {
                 return cEquipos.motobombas;
            },
            Aspiradoras: function () {
                return cEquipos.aspiradoras;
            },
            Espumadores: function () {
                return cEquipos.espumadores;
            },
            Generadores: function () {
                return cEquipos.generadores;
            },
            TorresIluminacion : function(){
                return cEquipos.torresIluminacion;
            },
            Podadoras: function(){
                return cEquipos.podadoras;
            },
            Desbrosadoras:function(){
                return cEquipos.desbrosadoras;
            },
            Iniciar: function () {
                    var tipo = $routeParams.tipo;
                    var tipoFiltro = $routeParams.filtro;
                    var descripcion = $routeParams.descripcion;

                    this.categoriaSeleccionada = tipo;
                    if(tipo == 1){
                        if(tipoFiltro == 100){
                            this.cargarArray({id:1, name: "Hidrolavadoras"});
                        }else{
                           this.FiltrarHidrolavadoras({tipo:tipo, idTipo:tipoFiltro,name:descripcion}); 
                       }
                    }else{
                        this.arrFiltrado = this.Todos();
                        this.paginacion.ConstruirPaginado(this.arrFiltrado);
                        this.categoriaSeleccionada = 100;
                    }
            },
            CambiarGridList: function (tipo) {
                if (tipo == 'lista') {
                    $scope.objIteracion.gridList = 'lista';
                }
                if (tipo == 'grid') {
                    $scope.objIteracion.gridList = 'gallery';
                }
            },
            OpenModalDetalle: function (producto) {
                Modal.notificacion({info: producto, path: 'view/modal-detalle-equipo.html'});
            },
            OpenModalCotizacion: function (producto) {
                var name = producto.name,
                    marca = producto.marca,
                    modelo = producto.modelo,
                    asunto = "Cotización de Hidrolavadoras";

                console.log(producto);
                $location.path('/contacto/'+asunto+'/'+name+'/'+marca+'/'+modelo);
                //Modal.notificacion({info: producto, path: 'view/modal-cotizacion-equipo.html'});
            },
            CerrarModal: function () {
                Modal.cerrarModal();
            },
            FiltrarHidrolavadoras: function(tipo){

                $scope.objIteracion.selected.filtros = [{id:parseInt(tipo.tipo), idTipo:parseInt(tipo.idTipo),name:tipo.name}];
                var filt = "";
                if(tipo.idTipo == 1 || tipo.idTipo == 2 || tipo.idTipo == 3){
                    filt = JSLINQ(cEquipos.hidrolavadoras).
                        Where(function (item) {
                            return item.idMotor == tipo.idTipo;
                        });
                }
                if(tipo.idTipo == 4 || tipo.idTipo == 5){
                    filt = JSLINQ(cEquipos.hidrolavadoras).
                        Where(function (item) {
                            return item.idSerie == tipo.idTipo;
                        });
                }
                if(tipo.idTipo == 6 || tipo.idTipo == 7 || tipo.idTipo == 8){
                    filt = JSLINQ(cEquipos.hidrolavadoras).
                        Where(function (item) {
                            return item.idTipoAgua == tipo.idTipo;
                        });
                }
                this.arrFiltrado = filt.items;
                this.paginacion.ConstruirPaginado(this.arrFiltrado);
                this.arrFiltrosCategoria = this.GetFiltrosCategorias(1);
            },
            FiltrarEquipos: function (tipo) {
                var arrSeleccionados = $scope.objIteracion.selected.filtros;
                console.log(arrSeleccionados);
                this.arrFiltrado= [];
                if(tipo == 1){
                    if(arrSeleccionados.length == 0){
                        this.arrFiltrado = this.Hidrolavadoras();
                        this.paginacion.ConstruirPaginado(this.arrFiltrado);
                    }else{
                        var arrFiltrosEquipos= [];
                        arrSeleccionados.forEach(function (filtro) {
                            if(filtro.idTipo == 1 || filtro.idTipo == 2 || filtro.idTipo == 2){
                                var filt = JSLINQ(cEquipos.hidrolavadoras).
                                    Where(function (item) {
                                        return item.idMotor == filtro.idTipo;
                                    });
                                arrFiltrosEquipos = arrFiltrosEquipos.concat(filt.items);
                            }
                            if(filtro.idTipo == 4 || filtro.idTipo == 5){
                                var filt = JSLINQ(cEquipos.hidrolavadoras).
                                    Where(function (item) {
                                        return item.idSerie == filtro.idTipo;
                                    });
                                arrFiltrosEquipos = arrFiltrosEquipos.concat(filt.items);
                            }
                            if(filtro.idTipo == 6 || filtro.idTipo == 7 || filtro.idTipo == 8){
                                var filt = JSLINQ(cEquipos.hidrolavadoras).
                                    Where(function (item) {
                                        return item.idTipoAgua == filtro.idTipo;
                                    });
                                arrFiltrosEquipos = arrFiltrosEquipos.concat(filt.items);
                            }
                        });
                    this.arrFiltrado = arrFiltrosEquipos;
                    this.paginacion.ConstruirPaginado(this.arrFiltrado);
                    }
                }
            },
            paginacion: {
                paginasBusqueda: null,
                paginaActual: 0,
                numPaginas: null,
                paginaSiguiente: function () {
                    if ($scope.objIteracion.paginacion.paginaActual + 1 < $scope.objIteracion.paginacion.numPaginas)
                        $scope.objIteracion.paginacion.paginaActual++;
                },
                paginaAnterior: function () {
                    if ($scope.objIteracion.paginacion.paginaActual > 0)
                        $scope.objIteracion.paginacion.paginaActual--;
                },
                SeriePaginacion: function (min, max, step) {
                    step = step || 1;
                    var arr = [];
                    for (var i = min; i <= max; i += step)
                        arr.push(i);
                    return arr;
                },
                paginaSeleccionada: function (numberPagina) {
                    $scope.objIteracion.paginacion.paginaActual = numberPagina - 1;
                },
                ConstruirPaginado : function (json) {
                    var arreglo = [];
                    this.paginasBusqueda = [];
                    this.instEncontradas = json;

                    this.numPaginas = Math.round((this.instEncontradas.length - 1) / 6 - .6) + 1;

                    for (var i = 0; i < this.instEncontradas.length; i++) {
                        arreglo.push(this.instEncontradas[i]);
                        if ((i + 1) % 6 === 0 || i ===  this.instEncontradas.length - 1) {
                            this.paginasBusqueda.push(arreglo);
                            arreglo = [];
                        }
                    }
                }
            }
        };
        $scope.objIteracion.Iniciar();
    }])

    .controller('ctrlModalCotizacion', ['$scope', 'Modal', function ($scope, Modal) {
        $scope.objIteracion = {
            CerrarModal: function () {
                Modal.cerrarModal();
            }
        };
    }])

    .controller('ctrlRefacciones', ['$scope', 'Modal', 'cEquipos', '$routeParams',function ($scope, Modal, cEquipos,$routeParams) {
        $scope.objMenu.ItemSeleccionado('refacciones');
    }])

    .controller('ctrlContacto', ['$scope', function ($scope) {
            $scope.objMenu.ItemSeleccionado('contacto');
            $scope.objMenu.CambiarFooter('ajuste-footer');
            console.log("Contacto");
    }]);











angular.module('cCatalogos', [])
    .factory('cEquipos', function () {
        return {
            tiposEquipos: [
                {id: 100, name: "Todos"},
                {id: 1, name: "Hidrolavadoras",
                    filtros: [
                        {id: 1, idTipo: 1, name: "Motor a gasolina"},
                        {id: 1, idTipo: 2, name: "Motor eléctrico"},
                        {id: 1, idTipo: 3, name: "Motor a diesel"},
                        {id: 1, idTipo: 4, name: "Comercial"},
                        {id: 1, idTipo: 5, name: "Industrial"},
                        {id: 1, idTipo: 6, name: "Agua fria"},
                        {id: 1, idTipo: 7, name: "Agua caliente"},
                        {id: 1, idTipo: 8, name: "Agua caliente/fria"},
                        // {id: 1, idTipo: 9, name: "Accsesorios"}
                    ]
                },
                {id: 2, name: "Motobombas",
                    filtros: [
                        {id: 2, idTipo: 1, name: "Motor a gasolina"},
                        {id: 2, idTipo: 1, name: "Motor a diesel"},
                        {id: 2, idTipo: 1, name: "Comercial"},
                        {id: 2, idTipo: 1, name: "Industrial"},
                        {id: 2, idTipo: 1, name: "Accsesorios"}
                    ]
                },
                {id: 3, name: "Aspiradoras",
                    filtros: [
                        {idTipo: 3, name: "Comercial"},
                        {idTipo: 2, name: "Industrial"},
                    ]
                },
                {id: 4, name: "Espumadores",
                    filtros: [
                        {id: 4, idTipo:1, name: "Comercial"},
                        {id: 4, idTipo:2, name: "Industrial"},
                    ]
                },
                {id: 5, name: "Generadores",
                    filtros: [
                        {id: 5, idTipo:1, name: "Comercial"},
                        {id: 5, idTipo:2, name: "Industrial"},
                    ]
                },
                {id: 6, name: "Torres de Iluminación", filtros: []},
                {id: 7, name: "Podadoras", filtros: []},
                {id: 8, name: "Desbrosadoras", filtros: []},
            ],

            hidrolavadoras: [
                {
                    id: 1,
                    name: "Hidrolavadora industrial de alta presión en agua fría",
                    descripcion: "Hidrolavadora es para uso industrial con bomba de cigüeñal y bielas, para limpieza en industrias, de automóviles, camiones, piezas metálicas, pisos, etc., donde se requiera lavado a alta presión con agua fría.",
                    idSerie: 5,
                    descSerie: "Industrial",
                    idMotor: 2,
                    descMotor: "Electrica",
                    idTipoAgua: 6,
                    descTipoAgua: "Agua Fría",
                    marca: "POWERJET",
                    modelo: "F-150 Basic",
                    presion: "150 bares, (2,200 psig)",
                    potencia_de_motor: "5.5 hp, 1750 rpm",
                    peso: "48 Kg",
                    voltaje: "220 V",
                    conexion: "Trifásica",
                    uso: "Industrial",
                    consumo: "",
                    caldera: null,
                    img: "hidrolavadoras/f-150.jpg"
                },
                {
                    id: 1,
                    name: "Hidrolavadora industrial de alta presión en agua fría",
                    descripcion: "Esta hidrolavadora es para uso industrial, teniendo mucha potencia, para limpieza en industria química, metalúrgica etc., maquinaria pesada, piezas metálicas, pisos, etc., donde se requiera lavado con mucha presión con agua fría.",
                    idSerie: 5,
                    descSerie: "Industrial",
                    idMotor: 2,
                    descMotor: "Electrica",
                    idTipoAgua: 6,
                    descTipoAgua: "Agua Fría",
                    marca: "POWERJET",
                    modelo: "F-250",
                    presion: "250 bares, (3,625 psig)",
                    potencia_de_motor: "10 hp, 7.5 kw",
                    peso: "115 Kg",
                    voltaje: "220 o 440 V",
                    conexion: "Trifásica",
                    uso: "Industrial",
                    consumo: "",
                    caldera: null,
                    img: "hidrolavadoras/f-250.jpg"
                },
                {
                    id: 1,
                    name: "Hidrolavadora industrial de alta presión en agua fría",
                    descripcion: "Esta hidrolavadora es para uso industrial con bomba de cigüeñal y bielas, para limpieza en industrias, de automóviles, camiones, piezas metálicas, pisos, etc., con paro total y cubierta.",
                    idSerie: 5,
                    descSerie: "Industrial",
                    idMotor: 2,
                    descMotor: "Electrica",
                    idTipoAgua: 6,
                    descTipoAgua: "Agua Fría",
                    marca: "POWERJET",
                    modelo: "F-200",
                    presion: "200 bares, (3,000 psig)",
                    potencia_de_motor: "7.5 hp, 1750 rpm",
                    peso: "57 Kg",
                    voltaje: "220 o 440 V",
                    conexion: "Trifásica",
                    uso: "Industrial",
                    consumo: "",
                    caldera: null,
                    img: "hidrolavadoras/f-200.jpg"
                },
                {
                    id: 1,
                    name: "Hidrolavadora industrial de alta presión en agua caliente y fría",
                    descripcion: "Esta hidrolavadora es para uso industrial con bomba de cigüeñal y bielas, para limpieza en industrias, de automóviles, camiones, piezas metálicas, pisos, etc., con paro total y cubierta.",
                    idSerie: 5,
                    descSerie: "Industrial",
                    idMotor: 2,
                    descMotor: "Electrica",
                    idTipoAgua: 8,
                    descTipoAgua: "Agua Caliente y Fría",
                    marca: "POWERJET",
                    modelo: "TK-200/19 (Paro total retardado)",
                    presion: "200 Bares, (2,900 psig)",
                    potencia_de_motor: "10 hp, 1750 rpm",
                    peso: "180 Kg",
                    voltaje: "220 o 440 V",
                    conexion: "Trifásica",
                    uso: "Industrial",
                    consumo: "Diesel 5 kg/hr, 25 litros",
                    caldera: null,
                    img: "hidrolavadoras/tk-200-19.jpg"

                },
                {
                    id: 1,
                    name: "Hidrolavadora industrial de alta presión en agua caliente y fría",
                    descripcion: "Esta hidrolavadora es propia para trabajo de uso rudo, con ayuda del agua caliente es óptima para remover grasa, aceite o mugre muy pegada de maquinaria, camiones, pisos, etc., en donde no cuenten con suministro eléctrico. También se puede producir vapor saturado, para aquellos lugares donde la presión puede dañar la superficie lavada.",
                    idSerie: 5,
                    descSerie: "Industrial",
                    idMotor: 1,
                    descMotor: "Gasolina",
                    idTipoAgua: 8,
                    descTipoAgua: "Agua Caliente y Fría",
                    marca: "POWERJET",
                    modelo: "C-200 G",
                    presion: "200 Bares, (2,900 psig)",
                    potencia_de_motor: "18 hp, 1740 rpm",
                    peso: "170 Kg",
                    voltaje: "",
                    conexion: "Trifásica",
                    uso: "Industrial",
                    consumo: " Diesel 5 kg/hr, 25 litros",
                    caldera: "A diesel, de doble serpentín",
                    img: "hidrolavadoras/c-200.jpg"
                },
                {
                    id: 1,
                    name: "Hidrolavadora industrial de alta presión en agua caliente y fría",
                    descripcion: "Esta hidrolavadora es propia para trabajo de uso rudo, con ayuda del agua caliente es óptima para remover grasa, aceite o mugre muy pegada de maquinaria, camiones, pisos, etc., en donde no cuenten con suministro eléctrico. También se puede producir vapor saturado, para aquellos lugares donde la presión puede dañar la superficie lavada.",
                    idSerie: 4,
                    descSerie: "Comercial",
                    idMotor: 1,
                    descMotor: "Gasolina",
                    idTipoAgua: 8,
                    descTipoAgua: "Agua Caliente y Fría",
                    marca: "POWERJET",
                    modelo: "C-200 G",
                    presion: "200 Bares, (2,900 psig)",
                    potencia_de_motor: "18 hp, 1740 rpm",
                    peso: "170 Kg",
                    voltaje: "",
                    conexion: "Trifásica",
                    uso: "Industrial",
                    consumo: " Diesel 5 kg/hr, 25 litros",
                    caldera: "A diesel, de doble serpentín",
                    img: "hidrolavadoras/c-200.jpg"
                }
            ],
            motobombas: [
                {
                    id: 2,
                    name: "Motobombas WMP20X",
                    descripcion: "Motobomba para agua salada y líquidos especiales utilizados en agricultura e industria, gracias a su carcasa de termoplástico reforzado.",
                    idSerie: 1,
                    descSerie: "Industrial",
                    idMotor: null,
                    descMotor: null,
                    idTipoAgua: null,
                    descTipoAgua: null,
                    marca: "HONDA",
                    modelo: "19006001",
                    presion: null,
                    potencia_de_motor: null,
                    peso: null,
                    voltaje: null,
                    conexion: null,
                    uso: "Industrial",
                    consumo: null,
                    caldera: null,
                    img: "motobombas/wmp-20-x.jpg"
                },
                {
                    id: 2,
                    name: "Motobomba WB20-XM",
                    descripcion: "Esta hidrolavadora es propia para trabajo de uso rudo, con ayuda del agua caliente es óptima para remover grasa, aceite o mugre muy pegada de maquinaria, camiones, pisos, etc., en donde no cuenten con suministro eléctrico. También se puede producir vapor saturado, para aquellos lugares donde la presión puede dañar la superficie lavada.",
                    idSerie: 1,
                    descSerie: "Industrial",
                    idMotor: null,
                    descMotor: null,
                    idTipoAgua: null,
                    descTipoAgua: null,
                    marca: "HONDA",
                    modelo: "GX 160H1",
                    presion: null,
                    potencia_de_motor: null,
                    peso: null,
                    voltaje: null,
                    conexion: null,
                    uso: "Industrial",
                    consumo: null,
                    caldera: null,
                    img: "motobombas/MB20X.jpg"
                }
            ],
            aspiradoras: [
                {
                    id: 3,
                    name: "Aspiradora Industrial",
                    descripcion: "Esta hidrolavadora es para uso industrial con bomba de cigüeñal y bielas, para limpieza en industrias, de automóviles, camiones, piezas metálicas, pisos, etc., con paro total y cubierta.",
                    idSerie: 1,
                    descSerie: "Industrial",
                    idMotor: 1,
                    descMotor: "2 de 1,200 watts c/u, 120 ó 220 V.",
                    idTipoAgua: null,
                    descTipoAgua: null,
                    marca: "POWERJET",
                    modelo: "Base 429 con expulsión",
                    presion: null,
                    potencia_de_motor: "3.2 hp (26 hp peak)",
                    peso: "22Kg",
                    voltaje: "120 ó 220 V",
                    conexion: null,
                    uso: "Industrial",
                    consumo: "2 de 1,200 watts c/u, 120 ó 220 V.",
                    caldera: null,
                    img: "aspiradoras/base-429.jpg"

                }
            ],
            espumadores: [
                {
                    id: 4,
                    name: "Espumador Industrial",
                    descripcion: "Esta hidrolavadora es propia para trabajo de uso rudo, con ayuda del agua caliente es óptima para remover grasa, aceite o mugre muy pegada de maquinaria, camiones, pisos, etc., en donde no cuenten con suministro eléctrico. También se puede producir vapor saturado, para aquellos lugares donde la presión puede dañar la superficie lavada.",
                    idSerie: 1,
                    descSerie: "Industrial",
                    idMotor: null,
                    descMotor: null,
                    idTipoAgua: 3,
                    descTipoAgua: "Agua Caliente y Fría",
                    marca: "POWERJET",
                    modelo: "C-200 G",
                    presion: "200 Bares, (2,900 psig)",
                    potencia_de_motor: "18 hp, 1740 rpm",
                    peso: "170 Kg",
                    voltaje: "",
                    conexion: "Trifásica",
                    uso: "Industrial",
                    consumo: " Diesel 5 kg/hr, 25 litros",
                    caldera: "A diesel, de doble serpentín",
                    img: "espumadores/espumador-inoxidable-50-litros.jpg"
                }
            ],
            generadores: [
                {
                    id: 5,
                    name: "Generador",
                    descripcion: "Esta hidrolavadora es para uso industrial con bomba de cigüeñal y bielas, para limpieza en industrias, de automóviles, camiones, piezas metálicas, pisos, etc., con paro total y cubierta.",
                    idSerie: 1,
                    descSerie: "Industrial",
                    idMotor: 2,
                    descMotor: "Gasolina",
                    idTipoAgua: 3,
                    descTipoAgua: "Agua Caliente y Fría",
                    marca: "POWERJET",
                    modelo: "TK-200/19 (Paro total retardado)",
                    presion: "200 Bares, (2,900 psig)",
                    potencia_de_motor: "10 hp, 1750 rpm",
                    peso: "180 Kg",
                    voltaje: "220 o 440 V",
                    conexion: "Trifásica",
                    uso: "Industrial",
                    consumo: "Diesel 5 kg/hr, 25 litros",
                    caldera: null,
                    img: "generadores/CALT4500B.jpg"

                },
                {
                    id: 5,
                    name: "Generador Industrial",
                    descripcion: "Esta hidrolavadora es propia para trabajo de uso rudo, con ayuda del agua caliente es óptima para remover grasa, aceite o mugre muy pegada de maquinaria, camiones, pisos, etc., en donde no cuenten con suministro eléctrico. También se puede producir vapor saturado, para aquellos lugares donde la presión puede dañar la superficie lavada.",
                    idSerie: 1,
                    descSerie: "Industrial",
                    idMotor: null,
                    descMotor: null,
                    idTipoAgua: 3,
                    descTipoAgua: null,
                    marca: "POWERJET",
                    modelo: "C-200 G",
                    presion: "200 Bares, (2,900 psig)",
                    potencia_de_motor: "18 hp, 1740 rpm",
                    peso: "170 Kg",
                    voltaje: "",
                    conexion: "Trifásica",
                    uso: "Industrial",
                    consumo: " Diesel 5 kg/hr, 25 litros",
                    caldera: "A diesel, de doble serpentín",
                    img: "generadores/generador.jpg"
                }
            ],
            torresIluminacion:[],
            podadoras: [],
            desbrosadoras:[],
            compresores:[]
        }
    });
angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function(e,c){function b(g,j){if(angular.isArray(g)){for(var h=0;h<g.length;h++){if(angular.equals(g[h],j)){return true}}}return false}function f(g,j){g=angular.isArray(g)?g:[];for(var h=0;h<g.length;h++){if(angular.equals(g[h],j)){return g}}g.push(j);return g}function a(g,j){if(angular.isArray(g)){for(var h=0;h<g.length;h++){if(angular.equals(g[h],j)){g.splice(h,1);break}}}return g}function d(i,j,h){c(j)(i);var g=e(h.checklistModel);var l=g.assign;var k=e(h.checklistValue)(i.$parent);i.$watch("checked",function(o,m){if(o===m){return}var n=g(i.$parent);if(o===true){l(i.$parent,f(n,k))}else{l(i.$parent,a(n,k))}});i.$parent.$watch(h.checklistModel,function(n,m){i.checked=b(n,k)},true)}return{restrict:"A",priority:1000,terminal:true,scope:true,compile:function(g,h){if(g[0].tagName!=="INPUT"||!g.attr("type","checkbox")){throw'checklist-model should be applied to `input[type="checkbox"]`.'}if(!h.checklistValue){throw"You should provide `checklist-value`."}g.removeAttr("checklist-model");g.attr("ng-model","checked");return d}}}]);
angular.module('mContactanos',[])

.controller('ctrlContactanos', ['$scope', 'ServiciosHTTP','$routeParams','Modal', function($scope, ServiciosHTTP, $routeParams, Modal){
	$scope.contactanos = {
		btnActivo: true,
		mdlContactanos : {},
		IniciarVariable : function(){
			if($routeParams.name != undefined && $routeParams.marca != undefined && $routeParams.modelo != undefined){
				Modal.notificacion({info: "", path: 'view/modal-informativo-cotizacion.html'});
				this.mdlContactanos.asunto = $routeParams.asunto;
				this.mdlContactanos.mensaje = $routeParams.name +'\n' + $routeParams.marca + ' - '+ $routeParams.modelo;
				console.log(this.mdlContactanos);
			}else{
				this.mdlContactanos.asunto = "";
				this.mdlContactanos.mensaje = "";
			}

		},
		BtnEnviarCorreo : function(){
			console.log("new");
			this.btnActivo = false;
			this.EnviarCorreo();
		},
		EnviarCorreo : function(){
			var parametros = this.mdlContactanos;

			ServiciosHTTP.post(parametros, "/api/send-correo").$promise.then(function (data) {
                    data = JSON.parse(data);
                    console.log(data);
                    if (data.codE == 0) {
                    	$scope.contactanos.btnActivo = true;
                    	console.log(data);
                    } else {
                    	$scope.contactanos.btnActivo = true;
                      console.log(data);
                    }
                },
                function (errResponse) {	
                	$scope.contactanos.btnActivo = true;
                });
		}
	};	
}]);

angular.module('directivas', [])

.directive('phoneInput', function($filter, $browser) {
    return {
        require: 'ngModel',
        link: function($scope, $element, $attrs, ngModelCtrl) {
            var listener = function() {
                var value = $element.val().replace(/[^0-9]/g, '');
                $element.val($filter('tel')(value, false));
            };

            // This runs when we update the text field
            ngModelCtrl.$parsers.push(function(viewValue) {
                return viewValue.replace(/[^0-9]/g, '').slice(0,10);
            });

            // This runs when the model gets updated on the scope directly and keeps our view in sync
            ngModelCtrl.$render = function() {
                $element.val($filter('tel')(ngModelCtrl.$viewValue, false));
            };

            $element.bind('change', listener);
            $element.bind('keydown', function(event) {
                var key = event.keyCode;
                // If the keys include the CTRL, SHIFT, ALT, or META keys, or the arrow keys, do nothing.
                // This lets us support copy and paste too
                if (key == 91 || (15 < key && key < 19) || (37 <= key && key <= 40)){
                    return;
                }
                $browser.defer(listener); // Have to do this or changes don't get picked up properly
            });

            $element.bind('paste cut', function() {
                $browser.defer(listener);
            });
        }

    };
});

    angular.module('filtros',[])

    .filter('tel', function () {
        return function (tel) {
            if (!tel) { return ''; }

            var value = tel.toString().trim().replace(/^\+/, '');

            if (value.match(/[^0-9]/)) {
                return tel;
            }

            var country, city, number;

            switch (value.length) {
                case 1:
                case 2:
                case 3:
                    city = value;
                    break;

                default:
                    city = value.slice(0, 3);
                    number = value.slice(3);
            }

            if(number){
                if(number.length>3){
                    number = number.slice(0, 3) + '-' + number.slice(3,8);
                }
                else{
                    number = number;
                }

                return ("(" + city + ") " + number).trim();
            }
            else{
                return "(" + city;
            }

        };
    })
 
angular.module('ngService',[])
 .factory('Modal', ['ngDialog', '$location', '$rootScope', function (ngDialog, $location, $rootScope) {
        return {
            notificacion: function (params) {
                $rootScope.producto = params.info;
                ngDialog.open({
                    template: params.path,
                    className: 'ngdialog-theme-plain',
                    plain: false,
                    closeByDocument: false
                });
            },
            cerrarModal: function () {
                ngDialog.close();

            },
        };
    }])

    .factory('ServiciosHTTP', ['$resource', '$http', function ($resource, $http) {
            return {
                post: function (datos, servicio) {
                     $http.defaults.headers.post['Content-Type'] = 'application/json; charset=UTF-8';
                     //
                    var urlApi = 'https://api-rest-sediap.herokuapp.com',
                            resource = $resource(urlApi + servicio),
                            resultado = resource.save({}, datos);
                    return resultado;
                }
            }
        }])